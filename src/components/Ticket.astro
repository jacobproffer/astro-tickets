---
interface Props {
  title: string;
  theater: string;
  time: string;
  price: string;
  rating: string;
}

const { title, theater, time, price, rating } = Astro.props;

// Format the date string to a human-readable format
const formatDate = (dateString: string | null | undefined): string | null => {
  if (!dateString) return null;

  const [year, month] = dateString.split("-");
  if (!year || !month) return null;

  const date = new Date(Number(year), Number(month) - 1); // Month is 0-indexed
  return new Intl.DateTimeFormat("en-US", { year: "numeric", month: "long" }).format(date);
};
---

<div class="relative h-full text-black">
  <div class="flex flex-col justify-between h-full">
    <div class="grid">
      {title && <h3>{title}</h3>}

      {
        theater && (
          <small>
            <span class="sr-only">Ticket purchased at</span>
            {theater}
            <span aria-hidden="true">Presenting</span>
          </small>
        )
      }

      <ul class="flex">
        {
          time && (
            <li>
              <span class="sr-only">Ticket purchased on</span>
              <time datetime={formatDate(time)}>{time}</time>
            </li>
          )
        }

        {
          price && (
            <li>
              <span class="sr-only">The ticket cost</span>
              <small class="ticket__price">${price}</small>
            </li>
          )
        }

        {
          rating && (
            <li>
              <span class="sr-only">The movie is rated</span>
              {rating}
            </li>
          )
        }
      </ul>
    </div>
  </div>
</div>
