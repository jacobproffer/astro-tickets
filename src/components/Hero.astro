---
import Container from "./Container.astro";
import Graphic from "../assets/graphic.svg";
import { getCollection } from "astro:content";

const initialYear = 2007;
const currentYear = new Date().getFullYear();
const years = currentYear - initialYear;

const tickets = await getCollection("tickets");
const ticketCount = tickets.length;

// Get unique theaters from tickets
const uniqueTheaters = new Set(tickets.map((ticket) => ticket.data.theater));
const theaterCount = uniqueTheaters.size;
---

<section class="grid text-black bg-card mb-4">
  <Container class="grid gap-4">
    <h1 class="sr-only">Tickets</h1>
    <Graphic mode="inline" />
    <ul class="grid grid-cols-3 border-t border-b border-black border-dashed">
      <li
        class="flex items-center justify-between border-r border-black pt-4 pr-4 pb-4 border-dashed"
      >
        <h2 class="text-2xl md:text-4xl">Years</h2>
        <div class="md:text-2xl">{years}</div>
      </li>
      <li
        class="flex items-center justify-between p-4 border-r border-black border-dashed"
      >
        <h2 class="text-2xl md:text-4xl">Theaters</h2>
        <div class="md:text-2xl">{theaterCount}</div>
      </li>
      <li class="flex items-center justify-between pt-4 pb-4 pl-4">
        <h2 class="text-2xl md:text-4xl">Tickets</h2>
        <div class="md:text-2xl">{ticketCount}</div>
      </li>
    </ul>
  </Container>
</section>
